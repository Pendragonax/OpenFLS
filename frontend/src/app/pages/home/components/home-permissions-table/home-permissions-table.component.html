<mat-expansion-panel class="home-panel mx-2">
  <mat-expansion-panel-header class="home-panel-header">
    <mat-panel-title class="home-panel-title">
      <mat-icon>person</mat-icon>
      Zugriffsrechte
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div class="container-fluid">
    <div class="permissions-table">
      <table mat-table
             [dataSource]="permissions"
             class="mat-elevation-z4">
      <ng-container matColumnDef="name">
        <th mat-header-cell
            *matHeaderCellDef
            class="text-center">Name</th>
        <td mat-cell
            *matCellDef="let permission"
            class="text-center"> {{permission[0].name}} </td>
      </ng-container>

      <ng-container matColumnDef="lead">
        <th mat-header-cell
            *matHeaderCellDef
            class="text-center">Leitung</th>
        <td mat-cell
            *matCellDef="let permission"
            class="text-center">
          <mat-checkbox class="example-margin"
                        [disabled]="true"
                        [checked]="permission[2].changeInstitution"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="write">
        <th mat-header-cell *matHeaderCellDef class="text-center">Schreibrecht</th>
        <td mat-cell *matCellDef="let permission" class="text-center">
          <mat-checkbox class="example-margin"
                        [disabled]="true"
                        [checked]="permission[2].writeEntries"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="read">
        <th mat-header-cell *matHeaderCellDef class="text-center">Leserecht</th>
        <td mat-cell *matCellDef="let permission" class="text-center">
          <mat-checkbox class="example-margin"
                        [disabled]="true"
                        [checked]="permission[2].readEntries"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="affiliated">
        <th mat-header-cell *matHeaderCellDef class="text-center">Zugehörigkeit</th>
        <td mat-cell *matCellDef="let permission" class="text-center">
          <mat-checkbox class="example-margin"
                        [disabled]="true"
                        [checked]="permission[2].affiliated"></mat-checkbox>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: tableColumns;"></tr>
      </table>
    </div>

    <div class="permissions-mobile">
      @for (permission of permissions; track permission[0].id) {
        <div class="permission-card mat-elevation-z2">
          <div class="permission-header">{{ permission[0].name }}</div>
          <div class="permission-row">
            <span class="permission-label">Leitung</span>
            <mat-checkbox class="permission-checkbox"
                          [disabled]="true"
                          [checked]="permission[2].changeInstitution"></mat-checkbox>
          </div>
          <div class="permission-row">
            <span class="permission-label">Schreibrecht</span>
            <mat-checkbox class="permission-checkbox"
                          [disabled]="true"
                          [checked]="permission[2].writeEntries"></mat-checkbox>
          </div>
          <div class="permission-row">
            <span class="permission-label">Leserecht</span>
            <mat-checkbox class="permission-checkbox"
                          [disabled]="true"
                          [checked]="permission[2].readEntries"></mat-checkbox>
          </div>
          <div class="permission-row">
            <span class="permission-label">Zugehörigkeit</span>
            <mat-checkbox class="permission-checkbox"
                          [disabled]="true"
                          [checked]="permission[2].affiliated"></mat-checkbox>
          </div>
        </div>
      }
    </div>
  </div>
</mat-expansion-panel>
